# WebService

创建一个服务并发布

```java

@WebService
public class MyService {
    public String getData(String key) {
        return "参数为: " + key;
    }

    public static void main(String[] args) {
        Endpoint.publish("http://localhost:8080/myservice/data", new MyService());
        System.out.println("发布成功!");
    }
}
```

发布成功后浏览器访问`http://localhost:8080/myservice/data?wsdl`

显示如下

```xml
<!--  Published by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e.  -->
<!--  Generated by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e.  -->
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
             xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy"
             xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata"
             xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
             xmlns:tns="http://service.service.web.codingob.github.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://service.service.web.codingob.github.com/"
             name="MyServiceService">
    <types>
        <xsd:schema>
            <xsd:import namespace="http://service.service.web.codingob.github.com/"
                        schemaLocation="http://localhost:8080/myservice/data?xsd=1"/>
        </xsd:schema>
    </types>
    <message name="getData">
        <part name="parameters" element="tns:getData"/>
    </message>
    <message name="getDataResponse">
        <part name="parameters" element="tns:getDataResponse"/>
    </message>
    <portType name="MyService">
        <operation name="getData">
            <input wsam:Action="http://service.service.web.codingob.github.com/MyService/getDataRequest"
                   message="tns:getData"/>
            <output wsam:Action="http://service.service.web.codingob.github.com/MyService/getDataResponse"
                    message="tns:getDataResponse"/>
        </operation>
    </portType>
    <binding name="MyServicePortBinding" type="tns:MyService">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <operation name="getData">
            <soap:operation soapAction=""/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
    </binding>
    <service name="MyServiceService">
        <port name="MyServicePort" binding="tns:MyServicePortBinding">
            <soap:address location="http://localhost:8080/myservice/data"/>
        </port>
    </service>
</definitions>
```

生成客户端所需资源
`wsimport -keep http://localhost:8080/myservice/data?wsdl -p com.github.codingob.web.service.myservice`

调用服务接口

```java
public class WebServiceDemo {
    public static void main(String[] args) {
        MyService myService = new MyServiceService().getMyServicePort();
        String data = myService.getData("hello");
        System.out.println(data);
    }
}
```